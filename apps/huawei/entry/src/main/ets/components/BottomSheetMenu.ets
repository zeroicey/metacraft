/**
 * åº•éƒ¨èœå•å¼¹çª—ç»„ä»¶
 * æä¾›åŠæ¨¡æ€åº•éƒ¨å¼¹çª—èœå•åŠŸèƒ½
 * 
 * @ä½¿ç”¨ç¤ºä¾‹:
 * ```typescript
 * import { BottomSheetMenu } from '../components/BottomSheetMenu';
 * 
 * // åœ¨ä½ çš„é¡µé¢ä¸­ä½¿ç”¨:
 * BottomSheetMenu({
 *   onMenuItemClick: (menuId: string) => {
 *     console.info('ç‚¹å‡»äº†èœå•é¡¹:', menuId);
 *     // æ ¹æ® menuId å¤„ç†ä¸åŒçš„èœå•é¡¹ç‚¹å‡»
 *     if (menuId === 'profile') {
 *       // è·³è½¬åˆ°ä¸ªäººä¸­å¿ƒ
 *     } else if (menuId === 'settings') {
 *       // è·³è½¬åˆ°è®¾ç½®
 *     }
 *   }
 * })
 * ```
 * 
 * @ç»„ä»¶åŠŸèƒ½:
 * 1. ç‚¹å‡»ç»„ä»¶(é»˜è®¤ä¸ºæŒ‰é’®)è§¦å‘åº•éƒ¨å¼¹çª—
 * 2. å¼¹çª—å†…æ˜¾ç¤ºèœå•åˆ—è¡¨
 * 3. ç‚¹å‡»èœå•é¡¹åŽè‡ªåŠ¨å…³é—­å¼¹çª—å¹¶å›žè°ƒ
 * 4. æ”¯æŒæ‹–æ‹½è°ƒæ•´é«˜åº¦
 * 5. æ”¯æŒä¸‹æ‹‰å…³é—­
 */
@ComponentV2
export struct BottomSheetMenu {
  @Require @Param onMenuItemClick: (menuId: string) => void = () => {};
  
  @Local showSheet: boolean = false;

  build() {
    Button() {
      SymbolGlyph($r('sys.symbol.dot_grid_1x2'))
        .fontWeight(FontWeight.Normal)
        .fontSize(22)
        .fontColor([$r('sys.color.ohos_id_color_titlebar_icon')])
    }
    .backgroundColor(Color.Transparent)
    .height(40)
    .width(40)
    .onClick(() => {
      this.showSheet = true;
    })
    .bindSheet(this.showSheet, this.buildSheetContent(), {
      detents: [SheetSize.MEDIUM, SheetSize.LARGE],
      preferType: SheetType.BOTTOM,
      showClose: true,
      title: { title: 'èœå•' },
      dragBar: true,
      onDisappear: () => {
        this.showSheet = false;
      }
    })
  }

  @Builder
  buildSheetContent() {
    Column() {
      List() {
        ListItem() {
          Row() {
            Text('ðŸ‘¤')
              .fontSize(24)
              .margin({ right: 12 })
            Text('ä¸ªäººä¸­å¿ƒ')
              .fontSize(16)
              .fontColor($r('sys.color.ohos_id_color_text_primary'))
          }
          .width('100%')
          .height(56)
          .padding({ left: 16, right: 16 })
          .onClick(() => {
            this.showSheet = false;
            this.onMenuItemClick('profile');
          })
        }

        ListItem() {
          Row() {
            Text('âš™ï¸')
              .fontSize(24)
              .margin({ right: 12 })
            Text('è®¾ç½®')
              .fontSize(16)
              .fontColor($r('sys.color.ohos_id_color_text_primary'))
          }
          .width('100%')
          .height(56)
          .padding({ left: 16, right: 16 })
          .onClick(() => {
            this.showSheet = false;
            this.onMenuItemClick('settings');
          })
        }

        ListItem() {
          Row() {
            Text('â„¹ï¸')
              .fontSize(24)
              .margin({ right: 12 })
            Text('å…³äºŽ')
              .fontSize(16)
              .fontColor($r('sys.color.ohos_id_color_text_primary'))
          }
          .width('100%')
          .height(56)
          .padding({ left: 16, right: 16 })
          .onClick(() => {
            this.showSheet = false;
            this.onMenuItemClick('about');
          })
        }
      }
      .width('100%')
      .divider({ strokeWidth: 1, color: $r('sys.color.ohos_id_color_list_separator') })
    }
    .width('100%')
    .padding({ top: 8, bottom: 8 })
  }
}
